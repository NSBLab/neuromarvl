!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("cose-base")):"function"==typeof define&&define.amd?define(["cose-base"],e):"object"==typeof exports?exports.cytoscapeCoseBilkent=e(require("cose-base")):t.cytoscapeCoseBilkent=e(t.coseBase)}(self,(t=>(()=>{"use strict";var e={138:(t,e,n)=>{var o=n(140).layoutBase.LayoutConstants,i=n(140).layoutBase.FDLayoutConstants,a=n(140).CoSEConstants,s=n(140).CoSELayout,r=n(140).CoSENode,d=n(140).layoutBase.PointD,l=n(140).layoutBase.DimensionD,u={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function p(t){this.options=function(t,e){var n={};for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n}(u,t),g(this.options)}var g=function(t){null!=t.nodeRepulsion&&(a.DEFAULT_REPULSION_STRENGTH=i.DEFAULT_REPULSION_STRENGTH=t.nodeRepulsion),null!=t.idealEdgeLength&&(a.DEFAULT_EDGE_LENGTH=i.DEFAULT_EDGE_LENGTH=t.idealEdgeLength),null!=t.edgeElasticity&&(a.DEFAULT_SPRING_STRENGTH=i.DEFAULT_SPRING_STRENGTH=t.edgeElasticity),null!=t.nestingFactor&&(a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor),null!=t.gravity&&(a.DEFAULT_GRAVITY_STRENGTH=i.DEFAULT_GRAVITY_STRENGTH=t.gravity),null!=t.numIter&&(a.MAX_ITERATIONS=i.MAX_ITERATIONS=t.numIter),null!=t.gravityRange&&(a.DEFAULT_GRAVITY_RANGE_FACTOR=i.DEFAULT_GRAVITY_RANGE_FACTOR=t.gravityRange),null!=t.gravityCompound&&(a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.gravityCompound),null!=t.gravityRangeCompound&&(a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.gravityRangeCompound),null!=t.initialEnergyOnIncremental&&(a.DEFAULT_COOLING_FACTOR_INCREMENTAL=i.DEFAULT_COOLING_FACTOR_INCREMENTAL=t.initialEnergyOnIncremental),"draft"==t.quality?o.QUALITY=0:"proof"==t.quality?o.QUALITY=2:o.QUALITY=1,a.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=t.nodeDimensionsIncludeLabels,a.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=!t.randomize,a.ANIMATE=i.ANIMATE=o.ANIMATE=t.animate,a.TILE=t.tile,a.TILING_PADDING_VERTICAL="function"==typeof t.tilingPaddingVertical?t.tilingPaddingVertical.call():t.tilingPaddingVertical,a.TILING_PADDING_HORIZONTAL="function"==typeof t.tilingPaddingHorizontal?t.tilingPaddingHorizontal.call():t.tilingPaddingHorizontal};p.prototype.run=function(){var t,e,n=this.options,o=(this.idToLNode={},this.layout=new s),i=this;i.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var a=o.newGraphManager();this.gm=a;var r=this.options.eles.nodes(),d=this.options.eles.edges();this.root=a.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(r),o);for(var l=0;l<d.length;l++){var u=d[l],p=this.idToLNode[u.data("source")],g=this.idToLNode[u.data("target")];p!==g&&0==p.getEdgesBetween(g).length&&(a.add(o.newEdge(),p,g).id=u.id())}var E=function(t,e){"number"==typeof t&&(t=e);var n=t.data("id"),o=i.idToLNode[n];return{x:o.getRect().getCenterX(),y:o.getRect().getCenterY()}},c=function(){for(var a,s=function(){n.fit&&n.cy.fit(n.eles,n.padding),t||(t=!0,i.cy.one("layoutready",n.ready),i.cy.trigger({type:"layoutready",layout:i}))},r=i.options.refresh,d=0;d<r&&!a;d++)a=i.stopped||i.layout.tick();if(a)return o.checkLayoutSuccess()&&!o.isSubLayout&&o.doPostLayout(),o.tilingPostLayout&&o.tilingPostLayout(),o.isLayoutFinished=!0,i.options.eles.nodes().positions(E),s(),i.cy.one("layoutstop",i.options.stop),i.cy.trigger({type:"layoutstop",layout:i}),e&&cancelAnimationFrame(e),void(t=!1);var l=i.layout.getPositionsData();n.eles.nodes().positions((function(t,e){if("number"==typeof t&&(t=e),!t.isParent()){for(var n=t.id(),o=l[n],i=t;null==o&&(o=l[i.data("parent")]||l["DummyCompound_"+i.data("parent")],l[n]=o,null!=(i=i.parent()[0])););return null!=o?{x:o.x,y:o.y}:{x:t.position("x"),y:t.position("y")}}})),s(),e=requestAnimationFrame(c)};return o.addListener("layoutstarted",(function(){"during"===i.options.animate&&(e=requestAnimationFrame(c))})),o.runLayout(),"during"!==this.options.animate&&(i.options.eles.nodes().not(":parent").layoutPositions(i,i.options,E),t=!1),this},p.prototype.getTopMostNodes=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;var o=t.filter((function(t,n){"number"==typeof t&&(t=n);for(var o=t.parent()[0];null!=o;){if(e[o.id()])return!1;o=o.parent()[0]}return!0}));return o},p.prototype.processChildrenList=function(t,e,n){for(var o=e.length,i=0;i<o;i++){var a,s,u=e[i],p=u.children(),g=u.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((a=null!=u.outerWidth()&&null!=u.outerHeight()?t.add(new r(n.graphManager,new d(u.position("x")-g.w/2,u.position("y")-g.h/2),new l(parseFloat(g.w),parseFloat(g.h)))):t.add(new r(this.graphManager))).id=u.data("id"),a.paddingLeft=parseInt(u.css("padding")),a.paddingTop=parseInt(u.css("padding")),a.paddingRight=parseInt(u.css("padding")),a.paddingBottom=parseInt(u.css("padding")),this.options.nodeDimensionsIncludeLabels&&u.isParent()){var E=u.boundingBox({includeLabels:!0,includeNodes:!1}).w,c=u.boundingBox({includeLabels:!0,includeNodes:!1}).h,y=u.css("text-halign");a.labelWidth=E,a.labelHeight=c,a.labelPos=y}this.idToLNode[u.data("id")]=a,isNaN(a.rect.x)&&(a.rect.x=0),isNaN(a.rect.y)&&(a.rect.y=0),null!=p&&p.length>0&&(s=n.getGraphManager().add(n.newGraph(),a),this.processChildrenList(s,p,n))}},p.prototype.stop=function(){return this.stopped=!0,this};var E=function(t){t("layout","cose-bilkent",p)};"undefined"!=typeof cytoscape&&E(cytoscape),t.exports=E},140:e=>{e.exports=t}},n={};return function t(o){var i=n[o];if(void 0!==i)return i.exports;var a=n[o]={exports:{}};return e[o](a,a.exports,t),a.exports}(138)})()));